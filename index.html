<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scroll Verse Arena</title>
  <link href="style.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <h1 class="title">Scroll Verse Arena</h1>
    <p class="intro">Bienvenue dans le Scroll Verse Arena. Seuls les vrais connaisseurs des webtoons survivront aux épreuves.</p>
    <input type="text" id="pseudo" placeholder="Entre ton pseudo" />
    <button onclick="startGame()">Commencer</button>
    <div id="gameArea" style="display:none;">
  <p id="questionText"></p>
  <img id="questionImage" src="" style="max-width: 100%; display: none; margin-bottom: 1rem;" />
  <div id="optionsArea"></div>
  <input type="text" id="playerAnswer" placeholder="Ta réponse ici" style="display: none;" />
  <button id="submitBtn" onclick="submitAnswer()">Envoyer la réponse</button>
    </div>
  <script>
const questions = [
  {
    id: 1,
    type: "qcm",
    text: "Qui est le héros de Solo Leveling ?",
    options: ["Jin-Woo", "Bam", "Mori Jin", "Jin Mori"],
    answer: ["Jin-Woo"]
  },
  {
    id: 2,
    type: "image",
    text: "De quel manhwa vient ce personnage ?",
    image: "https://upload.wikimedia.org/wikipedia/en/7/79/Rai_Noblesse.jpg",
    options: ["Solo Leveling", "Noblesse", "UnOrdinary"],
    answer: ["Noblesse"]
  },
  {
    id: 3,
    type: "libre",
    text: "Quel est ton webtoon préféré ?",
    answer: []
  }
];

let currentQuestionIndex = 0;
let pseudo = "";

function startGame() {
  pseudo = document.getElementById("pseudo").value;
  if (!pseudo) {
    alert("Merci d’entrer un pseudo !");
    return;
  }
  localStorage.setItem("player", pseudo);
  showQuestion();
}

function showQuestion() {
  const q = questions[currentQuestionIndex];
  document.querySelector(".intro").style.display = "none";
  document.getElementById("gameArea").style.display = "block";
  document.getElementById("questionText").innerText = q.text;

  const image = document.getElementById("questionImage");
  if (q.image) {
    image.src = q.image;
    image.style.display = "block";
  } else {
    image.style.display = "none";
  }

  const optionsArea = document.getElementById("optionsArea");
  optionsArea.innerHTML = "";

  if (q.type === "qcm" || q.type === "image") {
    document.getElementById("playerAnswer").style.display = "none";
    q.options.forEach(opt => {
      const btn = document.createElement("button");
      btn.innerText = opt;
      btn.onclick = () => {
        document.getElementById("playerAnswer").value = opt;
        submitAnswer();
      };
      optionsArea.appendChild(btn);
    });
    document.getElementById("submitBtn").style.display = "none";
  } else {
    document.getElementById("playerAnswer").style.display = "block";
    document.getElementById("submitBtn").style.display = "inline-block";
  }
}

function submitAnswer() {
  const answer = document.getElementById("playerAnswer").value;
  if (!answer) {
    alert("Tu dois répondre !");
    return;
  }

  const q = questions[currentQuestionIndex];
  const responses = JSON.parse(localStorage.getItem("responses") || "[]");
  responses.push({
    player: pseudo,
    question: q.text,
    answer: answer
  });
  localStorage.setItem("responses", JSON.stringify(responses));

  document.getElementById("gameArea").innerHTML = `
    <p>Merci ${pseudo} !<br />
    Ta réponse a été enregistrée.<br />
    <strong>Bonne réponse :</strong> ${q.answer.join(", ")}</p>
  `;
}
      </script> 
</body>
</html> 
